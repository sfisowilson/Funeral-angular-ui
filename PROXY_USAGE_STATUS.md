# Service Proxy Usage Status

**Last Updated**: January 2, 2026 (After Proxy Regeneration & Service Migration)

## Overview

This document tracks the usage of auto-generated API service proxies from `/app/core/services/service-proxies.ts` (generated by NSwag from Swagger documentation).

**Recent Updates**:
- Backend controllers updated with `[ProducesResponseType]` attributes
- Proxies regenerated with correct return types
- **4 services successfully migrated to use proxies** ‚úÖ

## ‚úÖ Services Using Generated Proxies

### 1. TenantApprovalService
- **Location**: `app/core/services/tenant-approval.service.ts`
- **Proxy Used**: `TenantApprovalServiceProxy`
- **Status**: ‚úÖ **FULLY MIGRATED**
- **Methods**:
  - `tenantApproval_GetPendingTenants()` ‚úÖ
  - `tenantApproval_GetAllTenantRequests()` ‚úÖ
  - `tenantApproval_GetTenantDetail(tenantId)` ‚úÖ
  - `tenantApproval_ApproveTenant(dto)` ‚úÖ
  - `tenantApproval_RejectTenant(dto)` ‚úÖ
  - `tenantApproval_RequestChange(dto)` ‚úÖ

### 2. TenantInvoiceService ‚ú® NEW
- **Location**: `app/services/tenant-invoice.service.ts`
- **Proxy Used**: `Tenant_invoiceServiceProxy`
- **Status**: ‚úÖ **FULLY MIGRATED**
- **Methods**:
  - `invoiceList(status, page, pageSize)` ‚Üí `Observable<InvoiceDto[]>` ‚úÖ
  - `invoiceById(invoiceId)` ‚Üí `Observable<InvoiceDto>` ‚úÖ
  - `invoiceUnpaid()` ‚Üí `Observable<InvoiceDto[]>` ‚úÖ
  - `invoiceSummary()` ‚Üí `Observable<any>` ‚úÖ
  - `invoiceAll(tenantId, status, page, pageSize)` ‚Üí `Observable<any[]>` ‚úÖ
- **Backend Fix**: Added ProducesResponseType attributes to TenantInvoiceController

### 3. PaymentGatewayService ‚ú® NEW
- **Location**: `app/services/payment-gateway.service.ts`
- **Proxy Used**: `Payment_gatewayServiceProxy`
- **Status**: ‚úÖ **FULLY MIGRATED**
- **Methods**:
  - `initiate(request)` ‚Üí `Observable<PaymentInitiationResultDto>` ‚úÖ
  - `verify(transactionId, provider)` ‚Üí `Observable<PaymentVerificationResultDto>` ‚úÖ
- **Backend Fix**: Added ProducesResponseType attributes to PaymentGatewayController

### 4. DebitOrderService ‚ú® NEW
- **Location**: `app/services/debit-order.service.ts`
- **Proxy Used**: `Debit_orderServiceProxy` (partial)
- **Status**: ‚úÖ **PARTIALLY MIGRATED**
- **Methods Using Proxy**:
  - `batchList(page, pageSize)` ‚Üí `Observable<DebitOrderBatchDto[]>` ‚úÖ
  - `batchById(batchId)` ‚Üí `Observable<DebitOrderBatchDto>` ‚úÖ
  - `batchTransactions(batchId)` ‚Üí `Observable<DebitOrderTransactionDto[]>` ‚úÖ
- **Methods Using Direct HTTP** (not in Swagger):
  - `createBatch(request)` - Uses HttpClient
  - `generateNAEDOFile(batchId)` - Returns Blob, uses HttpClient
  - `processResponse(file)` - Uses FormData, uses HttpClient
- **Backend Fix**: Added ProducesResponseType attributes to DebitOrderController

## ‚ö†Ô∏è Services with Incomplete Proxies

### 5. TenantBankingService
- **Location**: `app/services/tenant-banking.service.ts`
- **Proxy Available**: `Tenant_bankingServiceProxy`
- **Status**: ‚ö†Ô∏è **PROXY INCOMPLETE**
- **Issue**: Proxy only has `verify()` method, missing:
  - Save/POST banking details (no route parameter in backend)
  - Get banking details (no route parameter in backend)
  - Delete banking details
- **Root Cause**: Backend controller methods without explicit route parameters may not appear in Swagger
- **Recommendation**: Add explicit routes like `[HttpPost("save")]`, `[HttpGet("details")]` to backend controller

## ‚ùå Services Without Proxies

### 6. CareerService
- **Location**: `app/core/services/career.service.ts`
- **Proxy Available**: ‚ùå **NO PROXY**
- **Issue**: Career API endpoints not exposed in Swagger
- **Recommendation**: Add Career controller to Swagger documentation

### 7. TenantFeatureService
- **Location**: `app/core/services/tenant-feature.service.ts`
- **Proxy Available**: `TenantServiceProxy` (partial)
- **Status**: ‚ùå **METHOD MISSING**
- **Issue**: `tenant_GetCurrentTenantFeatures()` method not in proxy
- **Recommendation**: Add endpoint to backend Swagger docs

## ‚ùå Services Without Proxies

### 6. CareerService
- **Location**: `app/core/services/career.service.ts`
- **Proxy Available**: ‚ùå **NO PROXY**
- **Issue**: Career API endpoints not exposed in Swagger
- **Recommendation**: Add Career controller to Swagger documentation

### 7. TenantFeatureService
- **Location**: `app/core/services/tenant-feature.service.ts`
- **Proxy Available**: `TenantServiceProxy` (partial)
- **Status**: ‚ùå **METHOD MISSING**
- **Issue**: `tenant_GetCurrentTenantFeatures()` method not in proxy
- **Recommendation**: Add endpoint to backend Swagger docs

### 8. LandingPageTemplateService
- **Location**: `app/pages/admin/landing-page-generator/landing-page-template.service.ts`
- **Proxy Available**: `LandingPageServiceProxy` (possibly)
- **Status**: ‚ùå **NOT CHECKED**
- **Recommendation**: Verify if `LandingPageServiceProxy` covers all methods

### 9. BookingService
- **Location**: `app/building-blocks/booking-widget/booking.service.ts`
- **Proxy Available**: ‚ùå **NO PROXY**
- **Issue**: Booking API may not be in Swagger
- **Status**: Some methods commented out in source

## üìã Action Items

### ‚úÖ Completed Actions
1. ‚úÖ **DONE**: Updated `TenantApprovalService` to use generated proxy
2. ‚úÖ **DONE**: Added `[ProducesResponseType]` attributes to 16 backend controller methods
3. ‚úÖ **DONE**: Regenerated proxies with correct return types
4. ‚úÖ **DONE**: Migrated `TenantInvoiceService` to use `Tenant_invoiceServiceProxy`
5. ‚úÖ **DONE**: Migrated `PaymentGatewayService` to use `Payment_gatewayServiceProxy`
6. ‚úÖ **DONE**: Migrated `DebitOrderService` to use `Debit_orderServiceProxy` (partial)
7. ‚úÖ **DONE**: Updated documentation with migration status

### Short-term (Next Sprint)
8. **Fix TenantBankingController Routes**: Add explicit route parameters:
   - Change `[HttpPost]` to `[HttpPost("save")]`
   - Change `[HttpGet]` to `[HttpGet("details")]`
   - Then regenerate proxies and migrate `TenantBankingService`

9. **Add Missing Backend Endpoints**:
   - `TenantController.GetCurrentTenantFeatures` endpoint
   - Career controller (if exists)
   - Booking controller (if needed)

10. **Test Migrated Services**: Verify all 4 newly migrated services work correctly in production

### Long-term Improvements
11. **Establish Process**: Create CI/CD pipeline step to regenerate proxies automatically when backend changes
12. **Type Safety**: All new controllers must use `[ProducesResponseType]` for proper proxy generation
13. **Documentation**: Keep this file updated as more services are migrated

## üîß How to Regenerate Proxies

```bash
# From Frontend/src directory
cd Frontend/src
node generator.js
```

**Prerequisites**:
- Backend API must be running on `https://localhost:44375`
- NSwag CLI must be installed
- `nswag.json` configuration file present

## üìö Resources

- **Generated Proxies**: `app/core/services/service-proxies.ts` (39,406 lines)
- **Generator Script**: `Frontend/src/generator.js`
- **NSwag Config**: `Frontend/src/nswag.json`
- **Backend Swagger**: `https://localhost:44375/swagger/v1/swagger.json`

## Notes

- Proxies handle authentication via HTTP interceptors automatically
- All proxies use the `API_BASE_URL` injection token from `environment.apiUrl`
- DTOs are auto-generated with `fromJS()` factory methods for JSON parsing
- Current proxy generation uses NSwag v14.6.1.0

---

**Last Updated**: January 2, 2026  
**Updated By**: AI Assistant  
**Next Review**: After backend Swagger documentation is updated
