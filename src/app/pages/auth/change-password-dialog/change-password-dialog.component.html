<p-toast></p-toast>

<p-dialog 
  header="Change Password Required" 
  [(visible)]="visible"
  (onHide)="onHide()"
  [modal]="true"
  [closable]="false"
  [draggable]="false"
  [resizable]="false"
  styleClass="modern-dialog change-password-dialog"
  [style]="{width: '450px'}">

  <ng-template pTemplate="content">
    <div class="password-change-content">
      <div class="info-message">
        <i class="pi pi-info-circle"></i>
        <p>You must change your password before continuing. Please enter your current password and choose a new one.</p>
      </div>

      <div class="form-field">
        <label for="currentPassword">Current Password <span class="required">*</span></label>
        <p-password 
          id="currentPassword"
          [(ngModel)]="currentPassword"
          [feedback]="false"
          [toggleMask]="true"
          placeholder="Enter current password"
          styleClass="w-full"
          [disabled]="loading()">
        </p-password>
      </div>

      <div class="form-field">
        <label for="newPassword">New Password <span class="required">*</span></label>
        <p-password 
          id="newPassword"
          [(ngModel)]="newPassword"
          [feedback]="true"
          [toggleMask]="true"
          placeholder="Enter new password (min 8 characters)"
          styleClass="w-full"
          [disabled]="loading()">
        </p-password>
        <small class="field-hint">Password must be at least 8 characters long</small>
      </div>

      <div class="form-field">
        <label for="confirmPassword">Confirm New Password <span class="required">*</span></label>
        <p-password 
          id="confirmPassword"
          [(ngModel)]="confirmPassword"
          [feedback]="false"
          [toggleMask]="true"
          placeholder="Re-enter new password"
          styleClass="w-full"
          [disabled]="loading()">
        </p-password>
      </div>
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <p-button 
        label="Change Password" 
        icon="pi pi-check"
        (onClick)="changePassword()"
        [loading]="loading()"
        [disabled]="loading()"
        styleClass="p-button-primary modern-button">
      </p-button>
    </div>
  </ng-template>
</p-dialog>
